@namespace Carlton.Base.Infrastructure.Client.Components.Tree
@using Carlton.Base.Infrastructure.Client.Components.TestBed

<div class="carlton-tree">
    <img src="https://paradisebound.org/wp-content/uploads/2016/09/paradise-bound-ministries-mission-teams-homes-built-and-dedicated-house-icon.png" height="50" width="50" alt="Image result for house icon" />
    <span>Carlton TestBed</span>

    <BaseTree Nodes="ViewModel"
              ChildSelector="@(item => item.Children)"
              @bind-SelectedNode="SelectedNode"
              @bind-ExpandedNodes="ExpandedNodes"
              HasChildNodes="@(item => item.Children?.Any() == true)"
              Style="TreeStyle.DefaultTreeStyle">
        <TitleTemplate>@context.DisplayName</TitleTemplate>
    </BaseTree>
</div>


@code {
    [Parameter]
    public IEnumerable<TreeItem> ViewModel { get; set; }

    [Parameter]
    public EventCallback<TreeItem> SelectedItemChanged { get; set; }

    IList<TreeItem> ExpandedNodes = new List<TreeItem>();

    private TreeItem _selectedNode;
    private TreeItem SelectedNode
    {
        set
        {
            _selectedNode = value;
            SelectedItemChanged.InvokeAsync(value);
        }
        get
        {
            return _selectedNode; 
        }
    }
}
