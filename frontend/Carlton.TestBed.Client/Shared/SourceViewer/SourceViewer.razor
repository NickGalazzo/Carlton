@using System.Reflection;
@using System.Resources; 
@using Carlton.Base.Client.State

@inherits CarltonComponentBase<SourceViewerViewModel>

<div class="test-component-source">
    @((MarkupString) Source)
</div>

@code {
    public string ComponentName { get { return ViewModel.ComponentType.Name; } }

    public string Source { get; private set; }

    protected override void OnInitialized()
    {
        base.OnInitialized();

        var assembly = Assembly.GetAssembly(ViewModel.ComponentType);

        System.Console.WriteLine($"{assembly.GetName()}.SourceExamples");

        var rm = new ResourceManager($"{assembly.GetName().Name}.SourceExamples", assembly);

        Source = rm.GetString(ComponentName);

        //using(var stream = Assembly.GetAssembly(typeof(Carlton.Dashboard.Components.ToDo.ToDoListCard)).GetManifestResourceStream("Carlton.Dashboard.Components.wwwroot.MarkupComponents.ToDoListSource.txt"))
        //using(var reader = new System.IO.StreamReader(stream))
        //{
        //    Test = reader.ReadToEnd();
        //}

    }
}

