@using Carlton.Base.Client.Components
@using Carlton.Base.Client.State

@inherits CarltonComponentBase<NavTreeViewModel>

<Tree TNode="NavTreeItem"
      Nodes="ViewModel.TreeItems"
      ChildSelector="@(item => item.Children)"
      SelectedNode="@ViewModel.SelectedNode"
      SelectedNodeChanged="@(async (node) => await base.OnComponentEvent.InvokeAsync(new NavTreeSelectedNodeEvent(node.LeafId)))"
      HasChildNodes="@(item => item.Children?.Any() == true)"
      Style="TreeStyle.DefaultTreeStyle">
    <TitleTemplate>@context.DisplayName</TitleTemplate>
</Tree>


@*ExpandedNodes="ViewModel.ExpandedNodes.ToList()"
    ExpandedNodesChanged="(nodes) => base.OnComponentEvent.InvokeAsync(new ExpandedNodesChangedEvent((IEnumerable<TestBedNavTreeItem>) nodes)"*@

